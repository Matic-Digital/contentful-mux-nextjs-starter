#!/bin/bash

# Production Environment Management Script
# This script provides commands for managing the production environment

# Set base paths
SCRIPT_DIR="$( cd "$( dirname "$(readlink -f "${BASH_SOURCE[0]}")" )" && pwd )"
PROJECT_ROOT="$( cd "$SCRIPT_DIR/.." && pwd )"
DOCKER_DIR="$PROJECT_ROOT/docker"
CONFIG_DIR="$PROJECT_ROOT"

# Colors
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m'

case "$1" in
  "start")
    echo -e "${YELLOW}Starting production environment...${NC}"
    docker-compose -f "${DOCKER_DIR}/docker-compose.prod.yml" up -d
    echo -e "${GREEN}✓ Production environment started${NC}"
    ;;
  "stop")
    echo -e "${YELLOW}Stopping production environment...${NC}"
    docker-compose -f "${DOCKER_DIR}/docker-compose.prod.yml" down
    echo -e "${GREEN}✓ Production environment stopped${NC}"
    ;;
  "restart")
    echo -e "${YELLOW}Restarting production environment...${NC}"
    docker-compose -f "${DOCKER_DIR}/docker-compose.prod.yml" down
    docker-compose -f "${DOCKER_DIR}/docker-compose.prod.yml" up -d
    echo -e "${GREEN}✓ Production environment restarted${NC}"
    ;;
  "logs")
    docker-compose -f "${DOCKER_DIR}/docker-compose.prod.yml" logs -f
    ;;
  *)
    echo "Usage: $0 {start|stop|restart|logs}"
    exit 1
    ;;
esac
