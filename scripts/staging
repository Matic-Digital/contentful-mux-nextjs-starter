#!/bin/bash

# Staging Environment Management Script
# This script provides commands for managing the staging environment

# Set base paths
SCRIPT_DIR="$( cd "$( dirname "$(readlink -f "${BASH_SOURCE[0]}")" )" && pwd )"
PROJECT_ROOT="$( cd "$SCRIPT_DIR/.." && pwd )"
DOCKER_DIR="$PROJECT_ROOT/docker"
CONFIG_DIR="$PROJECT_ROOT"

# Colors
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m'

case "$1" in
  "start")
    echo -e "${YELLOW}Starting staging environment...${NC}"
    docker-compose -f "${DOCKER_DIR}/docker-compose.staging.yml" up -d
    echo -e "${GREEN}✓ Staging environment started${NC}"
    ;;
  "stop")
    echo -e "${YELLOW}Stopping staging environment...${NC}"
    docker-compose -f "${DOCKER_DIR}/docker-compose.staging.yml" down
    echo -e "${GREEN}✓ Staging environment stopped${NC}"
    ;;
  "restart")
    echo -e "${YELLOW}Restarting staging environment...${NC}"
    docker-compose -f "${DOCKER_DIR}/docker-compose.staging.yml" down
    docker-compose -f "${DOCKER_DIR}/docker-compose.staging.yml" up -d
    echo -e "${GREEN}✓ Staging environment restarted${NC}"
    ;;
  "logs")
    docker-compose -f "${DOCKER_DIR}/docker-compose.staging.yml" logs -f
    ;;
  *)
    echo "Usage: $0 {start|stop|restart|logs}"
    exit 1
    ;;
esac
